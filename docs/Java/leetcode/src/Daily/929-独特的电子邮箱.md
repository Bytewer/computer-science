# 独特的电子邮件地址

https://leetcode.cn/problems/unique-email-addresses/



## 想法一：API

```java
public int numUniqueEmails(String[] emails) {
    HashSet<String> set = new HashSet<>();
    for (String email : emails) {
        String[] split = email.split("@");
        String localName = split[0];
        int plus = localName.indexOf("+");
        if (plus != -1) {
            localName = localName.substring(0, plus);
        }
        if (localName.contains(".")) {
            localName = localName.replace(".", "");
        }
        set.add(localName + "@" + split[1]);
    }
    return set.size();
}
```

> 执行结果：通过
>
> 执行用时：14 ms, 在所有 Java 提交中击败了61.10% 的用户
>
> 内存消耗：41.7 MB, 在所有 Java 提交中击败了55.78% 的用户
>
> 通过测试用例：185 / 185



## 来一波反向优化

```java
class Solution {
    public int numUniqueEmails(String[] emails) {
        return (int)Arrays.stream(emails).map(email -> {
            String[] sp = email.split("@");
            if (sp[0].contains("+")) {
                return sp[0].substring(0, sp[0].indexOf("+")).replace(".", "") + "@" + sp[1];
            } else {
                return sp[0].replace(".", "") + "@" + sp[1];
            }
        }).distinct().count();
    }
}
```

> 执行结果：通过
>
> 执行用时：15 ms, 在所有 Java 提交中击败了58.44% 的用户
>
> 内存消耗：42.1 MB, 在所有 Java 提交中击败了27.32% 的用户
>
> 通过测试用例：185 / 185



## StringBuilder正向优化

```java
class Solution {
    public int numUniqueEmails(String[] emails) {
        Set<String> set = new HashSet<>();
        for (String s : emails) {
            StringBuilder sb = new StringBuilder();
            int n = s.length(), i = 0;
            boolean ok = true;
            while (i < n) {
                char c = s.charAt(i);
                if (c == '@') break;
                if (c == '.' && ++i >= 0) continue;
                if (c == '+') ok = false;
                if (ok) sb.append(c);
                i++;
            }
            set.add(sb.append(s.substring(i)).toString());
        }
        return set.size();
    }
}
```

> 执行结果：通过
>
> 执行用时：7 ms, 在所有 Java 提交中击败了90.70% 的用户
>
> 内存消耗：41.2 MB, 在所有 Java 提交中击败了87.10% 的用户
>
> 通过测试用例：185 / 185